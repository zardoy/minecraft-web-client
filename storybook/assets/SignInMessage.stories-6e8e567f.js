var C=Object.defineProperty;var w=(i,r,n)=>r in i?C(i,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):i[r]=n;var g=(i,r,n)=>(w(i,typeof r!="symbol"?r+"":r,n),n);import{a as d,j as o}from"./jsx-runtime-37f7df21.js";import{R as y,r as k}from"./index-f1f2c4b1.js";import"./client-6473ed4a.js";import{B as I}from"./Button-171a86dd.js";import{P as v}from"./PixelartIcon-62975882.js";import{S as M}from"./Screen-09770016.js";import"./index-c74c9f7f.js";import"./SharedHudVars-63c800bd.js";class W extends y.Component{constructor(){super(...arguments);g(this,"state",{error:void 0})}componentDidCatch(n){this.setState({error:n})}render(){return this.state.error?this.props.renderError?this.props.renderError(this.state.error):y.createElement("h1",null,"App Crashed!"):this.props.children}}const _=(i,r)=>{k.useEffect(()=>{const n=new AbortController,u=new Set,m=new Set,c=new Set;return i({signal:n.signal,async(e){e()},timeout(e,a){const t=setTimeout(a,e);return u.add(t),t},interval(e,a){const t=setInterval(a,e);return m.add(t),t},on(e,a,t,l){let s;if("on"in e)e.on(a,t,l),s=()=>e.off(a,t);else if("addEventListener"in e)e.addEventListener(a,t,l),s=()=>e.removeEventListener(a,t,l);else if("addListener"in e)e.addListener(a,t,l),s=()=>e.removeListener(a,t);else throw new Error("Invalid target, must have on/off or addEventListener/removeEventListener or addListener/removeListener");return c.add(s),s}}),()=>{n.abort(),u.forEach(clearTimeout),m.forEach(clearInterval),c.forEach(e=>e())}},r)},x=({code:i="ABCD-EFGH-IJKL-MNOP",loginLink:r="https://aka.ms/devicelogin",connectingServer:n="mc.example.comsdlfjsklfjsfjdskfjsj",warningText:u=!0,expiresEnd:m=Date.now()+1e3*60*5,setSaveToken:c=()=>{},defaultSaveToken:e=!0,onCancel:a=()=>{},directLink:t="https://aka.ms/devicelogin"})=>{n.length>30&&(n=n.slice(0,30)+"...");const[l,s]=k.useState("");return _(({interval:f})=>{f(1e3,()=>{const h=Math.max(0,Math.ceil((m-Date.now())/1e3)),L=Math.floor(h/60),T=h%60;s(`${L}:${T.toString().padStart(2,"0")}`),h<=0&&s("Code expired!")})},[]),d(M,{title:"Microsoft Account Authentication",children:[d("div",{style:{background:"white",padding:"20px 18px",width:300,maxHeight:240,color:"black"},children:[o("div",{style:{fontSize:18,padding:"5px 10px",paddingBottom:1,backgroundColor:"lightgray",textAlign:"center",marginTop:-5,userSelect:"all"},children:i}),d("div",{style:{display:"flex",justifyContent:"center",fontSize:12},children:["Waiting... ",o(v,{iconName:"clock"})," ",l]}),d("div",{style:{fontSize:12,marginTop:10},children:["To join a Minecraft server ",n," using your Microsoft account, you need to visit"," ",o("a",{href:t,style:{color:"black",textDecoration:"underline",fontWeight:600},target:"_blank",children:"Direct Link"})," "," or "," ",o("a",{href:r,style:{color:"black",textDecoration:"underline",fontWeight:600},target:"_blank",children:r})," ","and enter the code above."]}),u&&d("div",{style:{fontSize:12,marginTop:5,color:"gray"},children:[o(v,{iconName:"alert"})," Join only ",o("b",{children:"vanilla servers"}),"! This client is detectable and may result in a ban by anti-cheat plugins."]}),c&&d("label",{style:{fontSize:12,display:"flex",alignItems:"center",gap:5,marginTop:4},children:[o("input",{type:"checkbox",defaultChecked:e,onChange:f=>c(f.target.checked)})," ","Save account token in this browser"]})]}),o(I,{style:{marginTop:-5},onClick:a,children:"Cancel"})]})};try{SignInMessage.displayName="SignInMessage",SignInMessage.__docgenInfo={description:"",displayName:"SignInMessage",props:{code:{defaultValue:null,description:"",name:"code",required:!1,type:{name:"string"}},loginLink:{defaultValue:null,description:"",name:"loginLink",required:!1,type:{name:"string"}},connectingServer:{defaultValue:null,description:"",name:"connectingServer",required:!1,type:{name:"string"}},warningText:{defaultValue:null,description:"",name:"warningText",required:!1,type:{name:"boolean"}},expiresEnd:{defaultValue:null,description:"",name:"expiresEnd",required:!1,type:{name:"number"}},setSaveToken:{defaultValue:null,description:"",name:"setSaveToken",required:!1,type:{name:"((state: boolean) => void)"}},defaultSaveToken:{defaultValue:null,description:"",name:"defaultSaveToken",required:!1,type:{name:"boolean"}},onCancel:{defaultValue:null,description:"",name:"onCancel",required:!1,type:{name:"(() => void)"}},directLink:{defaultValue:null,description:"",name:"directLink",required:!1,type:{name:"string"}}}}}catch{}const $={component:x,render({open:i}){return o(x,{})}},p={args:{}};var S,b,E;p.parameters={...p.parameters,docs:{...(S=p.parameters)==null?void 0:S.docs,source:{originalSource:`{
  args: {}
}`,...(E=(b=p.parameters)==null?void 0:b.docs)==null?void 0:E.source}}};const H=["Primary"];export{p as Primary,H as __namedExportsOrder,$ as default};
//# sourceMappingURL=SignInMessage.stories-6e8e567f.js.map
