import{j as e,a as g,F as z}from"./jsx-runtime-37f7df21.js";import{r as I,R as h}from"./index-f1f2c4b1.js";import{S as le}from"./Screen-09770016.js";import{I as k,S as ie}from"./Singleplayer-ee763d26.js";import{B as J}from"./Button-171a86dd.js";import{S as Q}from"./Select-d805750b.js";import{P as ae}from"./PixelartIcon-62975882.js";import"./index.esm-b23235d8.js";import"./MessageFormatted-2ac5f461.js";import"./vanilla-66a0fdf5.js";import"./Tabs-928a87e0.js";import"./MessageFormattedString-7672c9f4.js";import"./chatUtils-94ce7110.js";import"./SharedHudVars-63c800bd.js";import"./index-c74c9f7f.js";import"./floating-ui.dom-9b6a618e.js";const de=({versions:n,selected:m,onChange:c,updateOptions:r,containerStyle:v})=>e(Q,{initialOptions:n,defaultValue:m,updateOptions:l=>{r==null||r(l)},onValueChange:c,containerStyle:v??{width:"190px"},getCssOnInput:l=>{if(!n||!l)return{};const a=n.map(s=>s.value.split(".").map(Number)),i=l.split(".").map(Number),S=(s,x)=>{for(let t=0;t<Math.max(s.length,x.length);t++){const f=s[t]||0,y=x[t]||0;if(f>y)return 1;if(f<y)return-1}return 0};a.sort(S);const b=a[0],o=a.at(-1);if(!(S(i,b)>=0&&S(i,o)<=0))return{border:"1px solid red"};if(!n.some(s=>s.value===l))return{border:"1px solid yellow"}}});try{SelectGameVersion.displayName="SelectGameVersion",SelectGameVersion.__docgenInfo={description:"",displayName:"SelectGameVersion",props:{versions:{defaultValue:null,description:"",name:"versions",required:!0,type:{name:"Version[]"}},selected:{defaultValue:null,description:"",name:"selected",required:!1,type:{name:"Version"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"((newValue: string) => void)"}},updateOptions:{defaultValue:null,description:"",name:"updateOptions",required:!1,type:{name:"((newSel: string) => void)"}},placeholder:{defaultValue:null,description:"",name:"placeholder",required:!1,type:{name:"string"}},containerStyle:{defaultValue:null,description:"",name:"containerStyle",required:!1,type:{name:"CSSProperties"}},disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}}}}}catch{}var se=typeof window<"u",ue=function(n,m){m===void 0&&(m=!1);var c=I.useState(se?function(){return window.matchMedia(n).matches}:m),r=c[0],v=c[1];return I.useEffect(function(){var l=!0,a=window.matchMedia(n),i=function(){l&&v(!!a.matches)};return a.addListener(i),v(a.matches),function(){l=!1,a.removeListener(i)}},[n]),r};const ce=ue,me="@media (max-width: 440px)",pe=()=>ce(me.replace("@media ","")),K=190,fe=({onBack:n,onConfirm:m,title:c="Add a Server",initialData:r,parseQs:v,onQsConnect:l,defaults:a,accounts:i,versions:S,authenticatedAccounts:b})=>{const o=v?new URLSearchParams(window.location.search):void 0,A=o==null?void 0:o.get("name"),s=o==null?void 0:o.get("ip"),x=o==null?void 0:o.get("version"),t=o==null?void 0:o.get("proxy"),f=o==null?void 0:o.get("username"),y=o==null?void 0:o.get("lockConnect"),u=s==null?void 0:s.split(":"),p=r==null?void 0:r.ip.split(":"),[B,X]=h.useState((r==null?void 0:r.name)??A??""),[w,Y]=h.useState((p==null?void 0:p[0])??(u==null?void 0:u[0])??""),[W,Z]=h.useState((p==null?void 0:p[1])??(u==null?void 0:u[1])??""),[L,D]=h.useState((r==null?void 0:r.versionOverride)??(r==null?void 0:r.version)??x??""),[j,ee]=h.useState((r==null?void 0:r.proxyOverride)??t??""),[E,re]=h.useState((r==null?void 0:r.usernameOverride)??f??""),V=y==="true",_=pe(),C=r==null?void 0:r.authenticatedAccountOverride,[P,ne]=h.useState(C===!0?-2:C?i!=null&&i.includes(C)?i.indexOf(C):-2:-1),te=P===-2,M=P===-1,oe=M?void 0:te?!0:i==null?void 0:i[P];let R=w.includes(":")?w:`${w}:${W}`;R=R.replace(/:$/,"");const U={name:B,ip:R,versionOverride:L||void 0,proxyOverride:j||void 0,usernameOverride:E||void 0,authenticatedAccountOverride:oe};return e(le,{title:s?"Connect to Server":c,backdrop:!0,children:e("form",{style:{display:"flex",flexDirection:"column",height:"100%"},onSubmit:d=>{d.preventDefault(),m(U)},children:g("div",{style:{display:"grid",gap:3,gridTemplateColumns:_?"1fr":"1fr 1fr"},children:[!V&&e(z,{children:e("div",{style:{gridColumn:_?"":"span 2",display:"flex",justifyContent:"center"},children:e(O,{label:"Server Name",value:B,onChange:({target:{value:d}})=>X(d),placeholder:"Defaults to IP"})})}),e(O,{required:!0,label:"Server IP",value:w,disabled:V&&(u==null?void 0:u[0])!==null,onChange:({target:{value:d}})=>Y(d)}),e(O,{label:"Server Port",value:W,disabled:V&&(u==null?void 0:u[1])!==null,onChange:({target:{value:d}})=>Z(d),placeholder:"25565"}),e("div",{style:{gridColumn:_?"":"span 2"},children:"Overrides:"}),g("div",{style:{display:"flex",flexDirection:"column"},children:[e("label",{style:{fontSize:12,marginBottom:1,color:"lightgray"},children:"Version Override"}),e(de,{selected:{value:L,label:L},versions:(S==null?void 0:S.map(d=>({value:d,label:d})))??[],onChange:d=>{D(d)},placeholder:"Optional, but recommended to specify",disabled:V&&x!==null})]}),e(O,{label:"Proxy Override",value:j,disabled:V&&t!==null,onChange:({target:{value:d}})=>ee(d),placeholder:a==null?void 0:a.proxyOverride}),e(O,{label:"Username Override",value:E,disabled:!M||V&&f!==null,onChange:({target:{value:d}})=>re(d),placeholder:a==null?void 0:a.usernameOverride}),g("label",{style:{display:"flex",flexDirection:"column"},children:[e("span",{style:{fontSize:12,marginBottom:1,color:"lightgray"},children:"Account Override"}),g("select",{onChange:({target:{value:d}})=>ne(Number(d)),style:{background:"gray",color:"white",height:20,fontSize:13},defaultValue:C===!0?-2:C===void 0?-1:ve((i??[]).indexOf(C))??-2,children:[e("option",{value:-1,children:"Offline Account (Username)"}),i==null?void 0:i.map((d,G)=>g("option",{value:G,children:[d," (Logged In)"]},G)),e("option",{value:-2,children:"Any other MS account"})]})]}),!V&&g(z,{children:[e(N,{onClick:()=>{n()},children:"Cancel"}),e(N,{type:"submit",children:"Save"})]}),s&&e("div",{style:{gridColumn:_?"":"span 2",display:"flex",justifyContent:"center"},children:e(N,{"data-test-id":"connect-qs",onClick:()=>{l==null||l(U)},children:"Connect"})})]})})})},N=({...n})=>(n.style??(n.style={}),n.style.width=K,e(J,{...n})),O=({label:n,span:m,...c})=>g("div",{style:{display:"flex",flexDirection:"column",gridRow:m?"span 2 / span 2":void 0},children:[e("label",{style:{fontSize:12,marginBottom:1,color:"lightgray"},children:n}),e(k,{rootStyles:{width:K},...c})]}),ve=n=>n===-1?void 0:n;try{AddServerOrConnect.displayName="AddServerOrConnect",AddServerOrConnect.__docgenInfo={description:"",displayName:"AddServerOrConnect",props:{onBack:{defaultValue:null,description:"",name:"onBack",required:!0,type:{name:"() => void"}},onConfirm:{defaultValue:null,description:"",name:"onConfirm",required:!0,type:{name:"(info: BaseServerInfo) => void"}},title:{defaultValue:null,description:"",name:"title",required:!1,type:{name:"string"}},initialData:{defaultValue:null,description:"",name:"initialData",required:!1,type:{name:"BaseServerInfo"}},parseQs:{defaultValue:null,description:"",name:"parseQs",required:!1,type:{name:"boolean"}},onQsConnect:{defaultValue:null,description:"",name:"onQsConnect",required:!1,type:{name:"((server: BaseServerInfo) => void)"}},defaults:{defaultValue:null,description:"",name:"defaults",required:!1,type:{name:'Pick<BaseServerInfo, "proxyOverride" | "usernameOverride">'}},accounts:{defaultValue:null,description:"",name:"accounts",required:!1,type:{name:"string[]"}},authenticatedAccounts:{defaultValue:null,description:"",name:"authenticatedAccounts",required:!1,type:{name:"number"}},versions:{defaultValue:null,description:"",name:"versions",required:!1,type:{name:"string[]"}}}}}catch{}const $=({initialProxies:n,updateProxies:m,joinServer:c,username:r,setUsername:v,onProfileClick:l,...a})=>{const[i,S]=h.useState(n),b=t=>{S(t),m(t)},[o,A]=h.useState(""),[s,x]=h.useState(!0);return e(ie,{...a,firstRowChildrenOverride:e("form",{style:{width:"100%",display:"flex",justifyContent:"center"},onSubmit:t=>{t.preventDefault();let f=o,y,u=!1;const p=f.split(":");p.at(-1)==="ms"&&(u=!0,p.pop()),p.length>1&&p.at(-1).includes(".")&&(y=p.at(-1),f=p.slice(0,-1).join(":")),c({ip:f,versionOverride:y,authenticatedAccountOverride:u?!0:void 0},{shouldSave:s})},children:g("div",{style:{display:"flex",gap:5,alignItems:"center"},children:[e(k,{required:!0,placeholder:"Quick Connect IP (:version)",value:o,onChange:({target:{value:t}})=>A(t)}),g("label",{style:{fontSize:10,display:"flex",alignItems:"center",gap:5,height:"100%",marginTop:"-1px"},children:[e("input",{type:"checkbox",checked:s,style:{borderRadius:0},onChange:({target:{checked:t}})=>x(t)})," Save"]}),e(J,{style:{width:90},type:"submit",children:"Join Server"})]})}),searchRowChildrenOverride:e("div",{style:{},children:g("div",{style:{display:"flex",gap:3,alignItems:"center"},children:[e("span",{style:{color:"lightgray",fontSize:14},children:"Proxy:"}),e(Q,{initialOptions:i.proxies.map(t=>({value:t,label:t})),defaultValue:{value:i.selected,label:i.selected},updateOptions:t=>{b({proxies:[...i.proxies],selected:t})}}),e(ae,{iconName:"user",styles:{fontSize:14,color:"lightgray",marginLeft:2},onClick:l}),e(k,{rootStyles:{width:80},value:r,onChange:({target:{value:t}})=>v(t)})]})}),serversLayout:!0,onWorldAction:(t,f)=>{var y;t==="load"&&c({ip:f},{}),(y=a.onWorldAction)==null||y.call(a,t,f)}})};try{ServersList.displayName="ServersList",ServersList.__docgenInfo={description:"",displayName:"ServersList",props:{joinServer:{defaultValue:null,description:"",name:"joinServer",required:!0,type:{name:"(info: BaseServerInfo, additional: { shouldSave?: boolean | undefined; index?: number | undefined; }) => void"}},initialProxies:{defaultValue:null,description:"",name:"initialProxies",required:!0,type:{name:"SavedProxiesLocalStorage"}},updateProxies:{defaultValue:null,description:"",name:"updateProxies",required:!0,type:{name:"(proxies: SavedProxiesLocalStorage) => void"}},username:{defaultValue:null,description:"",name:"username",required:!0,type:{name:"string"}},setUsername:{defaultValue:null,description:"",name:"setUsername",required:!0,type:{name:"(username: string) => void"}},onProfileClick:{defaultValue:null,description:"",name:"onProfileClick",required:!1,type:{name:"(() => void)"}},worldData:{defaultValue:null,description:"",name:"worldData",required:!0,type:{name:"WorldProps[] | null"}},serversLayout:{defaultValue:null,description:"",name:"serversLayout",required:!1,type:{name:"boolean"}},firstRowChildrenOverride:{defaultValue:null,description:"",name:"firstRowChildrenOverride",required:!1,type:{name:"ReactNode"}},searchRowChildrenOverride:{defaultValue:null,description:"",name:"searchRowChildrenOverride",required:!1,type:{name:"ReactNode"}},providers:{defaultValue:null,description:"",name:"providers",required:!1,type:{name:"Record<string, string>"}},activeProvider:{defaultValue:null,description:"",name:"activeProvider",required:!1,type:{name:"string"}},setActiveProvider:{defaultValue:null,description:"",name:"setActiveProvider",required:!1,type:{name:"((provider: string) => void)"}},providerActions:{defaultValue:null,description:"",name:"providerActions",required:!1,type:{name:"Record<string, (() => void) | Element>"}},disabledProviders:{defaultValue:null,description:"",name:"disabledProviders",required:!1,type:{name:"string[]"}},isReadonly:{defaultValue:null,description:"",name:"isReadonly",required:!1,type:{name:"boolean"}},error:{defaultValue:null,description:"",name:"error",required:!1,type:{name:"string"}},warning:{defaultValue:null,description:"",name:"warning",required:!1,type:{name:"string"}},warningAction:{defaultValue:null,description:"",name:"warningAction",required:!1,type:{name:"(() => void)"}},warningActionLabel:{defaultValue:null,description:"",name:"warningActionLabel",required:!1,type:{name:"string"}},onWorldAction:{defaultValue:null,description:"",name:"onWorldAction",required:!0,type:{name:'(action: "load" | "export" | "delete" | "edit", worldName: string) => void'}},onGeneralAction:{defaultValue:null,description:"",name:"onGeneralAction",required:!0,type:{name:'(action: "cancel" | "create") => void'}}}}}catch{}const Re={component:$,render(n){const[m,c]=I.useState(!1),[r,v]=I.useState("");return m?e(fe,{onBack:()=>{c(!1)},accounts:["testting"],onConfirm:l=>{console.log("add server",l)}}):e($,{worldData:[{name:"test",title:"Server",formattedTextOverride:"play yes"}],joinServer:l=>{console.log("joinServer",l)},initialProxies:{proxies:["localhost","mc.hypixel.net"],selected:"localhost"},updateProxies:l=>{console.log("setProxies",l)},onWorldAction:()=>{},onGeneralAction:l=>{l==="create"&&c(!0)},username:r,setUsername:v})}},q={args:{}};var T,F,H;q.parameters={...q.parameters,docs:{...(T=q.parameters)==null?void 0:T.docs,source:{originalSource:`{
  args: {}
}`,...(H=(F=q.parameters)==null?void 0:F.docs)==null?void 0:H.source}}};const Ne=["Primary"];export{q as Primary,Ne as __namedExportsOrder,Re as default};
//# sourceMappingURL=ServersList.stories-d726fe54.js.map
