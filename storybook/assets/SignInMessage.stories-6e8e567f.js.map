{"version":3,"file":"SignInMessage.stories-6e8e567f.js","sources":["../../node_modules/.pnpm/@zardoy+react-util@0.2.4_react-dom@18.2.0_react@18.2.0__react@18.2.0/node_modules/@zardoy/react-util/build/errorBoundary.js","../../node_modules/.pnpm/@zardoy+react-util@0.2.4_react-dom@18.2.0_react@18.2.0__react@18.2.0/node_modules/@zardoy/react-util/build/useUtilsEffect.js","../../src/react/SignInMessage.tsx"],"sourcesContent":["import React from 'react';\n// TODO! use that modal from vite as default\nexport default class ErrorBoundary extends React.Component {\n    state = {\n        error: undefined,\n    };\n    componentDidCatch(error) {\n        this.setState({ error });\n    }\n    render() {\n        if (this.state.error)\n            return this.props.renderError ? this.props.renderError(this.state.error) : React.createElement(\"h1\", null, \"App Crashed!\");\n        return this.props.children;\n    }\n}\n","import { useEffect } from 'react';\nexport default (fn, deps) => {\n    useEffect(() => {\n        const controller = new AbortController();\n        const timeouts = new Set();\n        const intervals = new Set();\n        const unsubscribes = new Set();\n        fn({\n            signal: controller.signal,\n            async(callback) {\n                callback();\n            },\n            timeout(ms, callback) {\n                const id = setTimeout(callback, ms);\n                timeouts.add(id);\n                return id;\n            },\n            interval(ms, callback) {\n                const id = setInterval(callback, ms);\n                intervals.add(id);\n                return id;\n            },\n            on(target, event, callback, options) {\n                let unsubscribe;\n                if ('on' in target) {\n                    target.on(event, callback, options);\n                    unsubscribe = () => target.off(event, callback);\n                }\n                else if ('addEventListener' in target) {\n                    target.addEventListener(event, callback, options);\n                    unsubscribe = () => target.removeEventListener(event, callback, options);\n                }\n                else if ('addListener' in target) {\n                    target.addListener(event, callback, options);\n                    unsubscribe = () => target.removeListener(event, callback);\n                }\n                else {\n                    throw new Error('Invalid target, must have on/off or addEventListener/removeEventListener or addListener/removeListener');\n                }\n                unsubscribes.add(unsubscribe);\n                return unsubscribe;\n            }\n        });\n        return () => {\n            controller.abort();\n            timeouts.forEach(clearTimeout);\n            intervals.forEach(clearInterval);\n            unsubscribes.forEach(unsubscribe => unsubscribe());\n        };\n    }, deps);\n};\n","import { useState } from 'react'\nimport { useUtilsEffect } from '@zardoy/react-util'\nimport PixelartIcon from './PixelartIcon'\nimport Screen from './Screen'\nimport Button from './Button'\n\nexport default ({\n  code = 'ABCD-EFGH-IJKL-MNOP',\n  loginLink = 'https://aka.ms/devicelogin',\n  connectingServer = 'mc.example.comsdlfjsklfjsfjdskfjsj',\n  warningText = true,\n  expiresEnd = Date.now() + 1000 * 60 * 5,\n  setSaveToken = (() => { }) as ((state: boolean) => void) | undefined,\n  defaultSaveToken = true,\n  onCancel = () => { },\n  directLink = 'https://aka.ms/devicelogin'\n}) => {\n  if (connectingServer.length > 30) connectingServer = connectingServer.slice(0, 30) + '...'\n  const [timeLeft, setTimeLeft] = useState(``)\n\n  useUtilsEffect(({ interval }) => {\n    interval(1000, () => {\n      const timeLeft = Math.max(0, Math.ceil((expiresEnd - Date.now()) / 1000))\n      const minutes = Math.floor(timeLeft / 60)\n      const seconds = timeLeft % 60\n      setTimeLeft(`${minutes}:${seconds.toString().padStart(2, '0')}`)\n      if (timeLeft <= 0) setTimeLeft('Code expired!')\n    })\n  }, [])\n\n  return <Screen title='Microsoft Account Authentication'>\n    <div style={{\n      background: 'white',\n      padding: '20px 18px',\n      width: 300,\n      maxHeight: 240,\n      color: 'black',\n      // borderRadius: 8,\n    }}\n    >\n      <div style={{\n        // fontFamily: 'monospace',\n        fontSize: 18,\n        padding: '5px 10px',\n        paddingBottom: 1,\n        backgroundColor: 'lightgray',\n        textAlign: 'center',\n        marginTop: -5,\n        userSelect: 'all',\n      }}\n      >{code}\n      </div>\n      <div style={{\n        display: 'flex',\n        justifyContent: 'center',\n        fontSize: 12,\n      }}\n      >\n        Waiting... <PixelartIcon iconName='clock' /> {timeLeft}\n      </div>\n      <div style={{\n        fontSize: 12,\n        marginTop: 10,\n      }}\n      >\n        To join a Minecraft server {connectingServer} using your Microsoft account, you need to visit{' '}\n        <a\n          href={directLink}\n          style={{\n            color: 'black',\n            textDecoration: 'underline',\n            fontWeight: 600,\n          }}\n          target='_blank'\n        >Direct Link\n        </a>\n        {' '} or {' '}\n        <a\n          href={loginLink}\n          style={{\n            color: 'black',\n            textDecoration: 'underline',\n            fontWeight: 600,\n          }}\n          target='_blank'\n        >{loginLink}\n        </a>\n        {' '}\n        and enter the code above.\n      </div>\n      {warningText && <div style={{\n        fontSize: 12,\n        marginTop: 5,\n        color: 'gray'\n      }}\n      >\n        <PixelartIcon iconName='alert' /> Join only <b>vanilla servers</b>! This client is detectable and may result in a ban by anti-cheat plugins.\n      </div>}\n      {setSaveToken && <label style={{\n        fontSize: 12,\n        display: 'flex',\n        alignItems: 'center',\n        gap: 5,\n        marginTop: 4,\n      }}\n      >\n        <input type='checkbox' defaultChecked={defaultSaveToken} onChange={e => setSaveToken(e.target.checked)} />{' '}\n        Save account token in this browser\n      </label>}\n    </div>\n    <Button\n      style={{\n        marginTop: -5,\n      }}\n      onClick={onCancel}\n    >Cancel\n    </Button>\n  </Screen>\n}\n"],"names":["ErrorBoundary","React","__publicField","error","useUtilsEffect","fn","deps","useEffect","controller","timeouts","intervals","unsubscribes","callback","ms","id","target","event","options","unsubscribe","SignInMessage$1","code","loginLink","connectingServer","warningText","expiresEnd","setSaveToken","defaultSaveToken","onCancel","directLink","timeLeft","setTimeLeft","useState","interval","timeLeft2","minutes","seconds","jsxs","Screen","jsx","PixelartIcon","e","Button"],"mappings":"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","x_google_ignoreList":[0,1]}